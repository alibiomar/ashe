"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{7235:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var r=n(4848),i=n(6540),a=n(4922),l=n(9437);let o=e=>{let{grid:t=15,mouse:n=.1,strength:o=.15,relaxation:u=.9,imageSrc:v,className:s=""}=e,d=(0,i.useRef)(null),f=(0,i.useRef)(1),m=(0,i.useRef)(null),p=(0,i.useRef)(null);return(0,i.useEffect)(()=>{if(!d.current)return;let e=d.current,r=new a.Z58,i=new l.JeP({antialias:!0,alpha:!0,powerPreference:"high-performance"});i.setPixelRatio(Math.min(window.devicePixelRatio,2)),e.appendChild(i.domElement);let s=new a.qUd(0,0,0,0,-1e3,1e3);s.position.z=2,m.current=s;let c={time:{value:0},resolution:{value:new a.IUQ},uTexture:{value:null},uDataTexture:{value:null}};new a.Tap().load(v,e=>{e.minFilter=a.k6q,f.current=e.image.width/e.image.height,c.uTexture.value=e,E()});let h=new Float32Array(4*t*t);for(let e=0;e<t*t;e++)h[4*e]=255*Math.random()-125,h[4*e+1]=255*Math.random()-125;p.current=new Float32Array(h);let w=new a.GYF(h,t,t,a.GWd,a.RQf);w.needsUpdate=!0,c.uDataTexture.value=w;let x=new a.BKk({side:a.$EB,uniforms:c,vertexShader:"\nuniform float time;\nvarying vec2 vUv;\nvarying vec3 vPosition;\n\nvoid main() {\n  vUv = uv;\n  vPosition = position;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"\nuniform sampler2D uDataTexture;\nuniform sampler2D uTexture;\nuniform vec4 resolution;\nvarying vec2 vUv;\n\nvoid main() {\n  vec2 uv = vUv;\n  vec4 offset = texture2D(uDataTexture, vUv);\n  gl_FragColor = texture2D(uTexture, uv - 0.02 * offset.rg);\n}"}),g=new a.bdM(1,1,t-1,t-1),M=new a.eaF(g,x);r.add(M);let E=()=>{let t=e.offsetWidth,n=e.offsetHeight,r=t/n,a=f.current;i.setSize(t,n);let l=Math.max(r/a,1);M.scale.set(a*l,l,1);let o=1*r;s.left=-o/2,s.right=o/2,s.top=.5,s.bottom=-.5,s.updateProjectionMatrix(),c.resolution.value.set(t,n,1,1)},T={x:0,y:0,prevX:0,prevY:0,vX:0,vY:0},U=t=>{let n=e.getBoundingClientRect(),r=(t.clientX-n.left)/n.width,i=1-(t.clientY-n.top)/n.height;T.vX=r-T.prevX,T.vY=i-T.prevY,Object.assign(T,{x:r,y:i,prevX:r,prevY:i})},Y=()=>{w.needsUpdate=!0,Object.assign(T,{x:0,y:0,prevX:0,prevY:0,vX:0,vY:0})};e.addEventListener("mousemove",U),e.addEventListener("mouseleave",Y),window.addEventListener("resize",E),E();let X=()=>{requestAnimationFrame(X),c.time.value+=.05;let e=w.image.data;for(let n=0;n<t*t;n++)e[4*n]*=u,e[4*n+1]*=u;let a=t*T.x,l=t*T.y,v=t*n;for(let n=0;n<t;n++)for(let r=0;r<t;r++){let i=Math.pow(a-n,2)+Math.pow(l-r,2);if(i<v*v){let a=4*(n+t*r),l=Math.min(v/Math.sqrt(i),10);e[a]+=100*o*T.vX*l,e[a+1]-=100*o*T.vY*l}}w.needsUpdate=!0,i.render(r,s)};return X(),()=>{e.removeEventListener("mousemove",U),e.removeEventListener("mouseleave",Y),window.removeEventListener("resize",E),i.dispose(),g.dispose(),x.dispose(),w.dispose(),c.uTexture.value&&c.uTexture.value.dispose()}},[t,n,o,u,v]),(0,r.jsx)("div",{ref:d,className:"w-full h-full overflow-hidden ".concat(s)})}}}]);