(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[268,374],{2322:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/products",function(){return a(4988)}])},6993:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(4848);a(6540);let i=()=>(0,s.jsx)("div",{className:"loader-container",children:(0,s.jsxs)("svg",{className:"loader",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1427.4 1153.8",width:"500",height:"500",children:[(0,s.jsx)("defs",{children:(0,s.jsx)("filter",{id:"blurFilter",children:(0,s.jsx)("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0",children:(0,s.jsx)("animate",{attributeName:"stdDeviation",values:"0;50;0",dur:"2s",repeatCount:"indefinite"})})})}),(0,s.jsx)("path",{d:"M904.3,531.7c-66.1.1-121.5-53.4-121.2-119.5.3,66.2-55,119.6-121.2,119.5,0,0-327,0-327,0v13h327c66.1-.1,121.5,53.4,121.2,119.5-.3-66.2,55-119.6,121.2-119.5,0,0,216.7,0,216.7,0v-13h-216.7ZM840.1,544.7c-25,14.5-45.2,36.7-57,63.2-13.8-30.8-38.9-55.9-69.7-69.7,30.8-13.8,55.9-38.9,69.7-69.7,13.8,30.8,39,56,69.7,69.7-4.4,2-8.6,4.1-12.7,6.5Z",fill:"#000",stroke:"#000",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#blurFilter)"})]})})},4988:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var s=a(4848),i=a(6540),r=a(1884),c=a(1268),n=a(2730),l=a(6993),o=a(1555),d=a(8987),u=a(4721);let h=(0,i.lazy)(()=>Promise.all([a.e(846),a.e(121),a.e(763)]).then(a.bind(a,9763)));function x(){let[e,t]=(0,i.useState)(""),[a,x]=(0,i.useState)([]),[b,m]=(0,i.useState)(null),[f,p]=(0,i.useState)(null),[g,k]=(0,i.useState)(!1),[w,y]=(0,i.useState)(!0);(0,i.useRef)(),(0,i.useEffect)(()=>{j();let e=(0,c.xI)().onAuthStateChanged(e=>{m(e),e?(N(e.uid),A(e.uid)):t("")});return()=>e()},[]);let j=(0,i.useCallback)(async()=>{if(g||!w)return;k(!0);let e=(0,r.rJ)(o.db,"products"),t=(0,r.P)(e,(0,r.My)("index","desc"),(0,r.AB)(2));f&&(t=(0,r.P)(t,(0,r.HM)(f)));try{let e=await (0,r.GG)(t),a=e.docs.map(e=>({id:e.id,...e.data()}));x(e=>[...e,...a]),k(!1);let s=e.docs[e.docs.length-1];p(s),y(2===e.docs.length)}catch(e){console.error("Error fetching products:",e),k(!1)}},[g,w,f]),v=(0,i.useCallback)(async e=>{if(!b){let t=new Map((d.A.get("basket")?JSON.parse(d.A.get("basket")):[]).map(e=>["".concat(e.id,"-").concat(e.size),e])),a="".concat(e.id,"-").concat(e.size);t.has(a)?t.get(a).quantity+=1:t.set(a,{...e,quantity:1,size:e.size});let s=Array.from(t.values());d.A.set("basket",JSON.stringify(s),{expires:7}),u.oR.success("".concat(e.name," added to your basket!"));return}let t=(0,r.H9)(o.db,"baskets",b.uid),a=await (0,r.x7)(t),s=new Map;a.exists()&&(s=new Map(a.data().items.map(e=>["".concat(e.id,"-").concat(e.size),e])));let i="".concat(e.id,"-").concat(e.size);s.has(i)?s.get(i).quantity+=1:s.set(i,{...e,quantity:1,size:e.size});let c=Array.from(s.values());await (0,r.BN)(t,{items:c}),u.oR.success("".concat(e.name," added to your basket!"))},[b]),N=(0,i.useCallback)(async e=>{let t=d.A.get("basket")?JSON.parse(d.A.get("basket")):[];if(t.length>0){let a=(0,r.H9)(o.db,"baskets",e),s=await (0,r.x7)(a),i=new Map;s.exists()&&(i=new Map(s.data().items.map(e=>["".concat(e.id,"-").concat(e.size),e]))),t.forEach(e=>{let t="".concat(e.id,"-").concat(e.size);i.has(t)?i.get(t).quantity+=e.quantity:i.set(t,e)});let c=Array.from(i.values());await (0,r.BN)(a,{items:c}),d.A.remove("basket")}},[]),A=(0,i.useCallback)(async e=>{try{let a=(0,r.H9)(o.db,"users",e),s=await (0,r.x7)(a);if(s.exists()){let e=s.data();t(e.firstName||"Valued User")}else t("Valued User")}catch(e){console.error("Error fetching user data:",e),t("Valued User")}},[]);return g?(0,s.jsx)(l.default,{}):(0,s.jsxs)(n.A,{children:[(0,s.jsx)("header",{className:"bg-gradient-to-b from-white to-gray-50 py-20 mb-16 border-b",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 text-center",children:[(0,s.jsx)("h1",{className:"text-5xl font-black text-gray-900 mb-4 tracking-tight",children:"Our Collection"}),b&&(0,s.jsxs)("p",{className:"text-xl text-gray-600 font-medium",children:["Welcome back, ",e," ",(0,s.jsx)("span",{className:"wave",children:"\uD83D\uDC4B"})]})]})}),(0,s.jsxs)("main",{className:"container mx-auto px-4 mb-24",children:[(0,s.jsx)("div",{className:"grid grid-cols-1 gap-12",children:a.map((e,t)=>(0,s.jsx)("div",{className:"group relative",children:(0,s.jsx)(i.Suspense,{fallback:(0,s.jsx)("div",{className:"aspect-square bg-gray-100  animate-pulse"}),children:(0,s.jsx)(h,{product:e,onAddToBasket:v})})},e.id||"product-".concat(t)))}),w&&(0,s.jsx)("div",{className:"flex justify-center mt-16",children:(0,s.jsx)("button",{onClick:j,disabled:g,className:"w-full py-4 border-2 border-black font-bold uppercase tracking-wide flex items-center justify-center transition-all bg-black text-white hover:bg-white hover:text-black focus:bg-white focus:text-black focus:outline-none ".concat(g?"opacity-50 cursor-not-allowed":""),children:g?"Loading...":"Load More"})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[563,183,35,730,636,593,792],()=>t(2322)),_N_E=e.O()}]);